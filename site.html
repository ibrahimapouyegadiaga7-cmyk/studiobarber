<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPG Élégance | Votre Style</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
  // Remplace ces deux valeurs par tes propres clés (trouvées dans Settings > API sur Supabase)
  const SUPABASE_URL = 'https://hhylkfuburuxltobtduc.supabase.co';
  const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhoeWxrZnVidXJ1eGx0b2J0ZHVjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxNDk3OTgsImV4cCI6MjA4NTcyNTc5OH0.X1ioG68iC9SehU0tt2_MNNeFI0U2J0fjIgZcnsU3cxg';
  const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

  // 1. Fonction pour charger les avis depuis la base de données
  async function chargerAvis() {
      const { data, error } = await supabase
          .from('commentaires')
          .select('*')
          .order('created_at', { ascending: false });

      if (data) {
          const container = document.getElementById('avisContainer');
          container.innerHTML = ''; // Vide le conteneur
          data.forEach(avis => {
              afficherAvisSurPage(avis);
          });
      }
  }

  // 2. Fonction pour envoyer un avis vers la base de données
  document.getElementById('reviewForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const nom = document.getElementById('userName').value;
      const texte = document.getElementById('userComment').value;
      const note = document.querySelector('input[name="star"]:checked')?.value || 5;

      const { error } = await supabase
          .from('commentaires')
          .insert([{ name: nom, comment: texte, stars: note }]);

      if (error) {
          alert("Erreur lors de l'envoi : " + error.message);
      } else {
          this.reset();
          chargerAvis(); // Actualise la liste
      }
  });

  function afficherAvisSurPage(avis) {
      const container = document.getElementById('avisContainer');
      const div = document.createElement('div');
      div.classList.add('avis-card');
      div.innerHTML = `
          <div class="stars">${"★".repeat(avis.stars)}${"☆".repeat(5 - avis.stars)}</div>
          <p class="quote">"${avis.comment}"</p>
          <p class="client-name">${avis.name}</p>
      `;
      container.prepend(div);
  }

  // Charger les avis au lancement
  chargerAvis();
</script>
<body>

    <header>
        <nav>
            <div class="logo">IPG BARBER SHOP</div>
            <ul>
                <li><a href="#">Accueil</a></li>
                <li><a href="#">Services</a></li>
                <li><a href="#">Galerie</a></li>
                <li><a href="#">Tarifs</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
            <a href="#reservation" class="btn-nav">Prendre rendez-vous</a>
        </nav>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1>Votre style, notre signature.</h1>
            <p>L'élégance rencontre l'art de la coiffure</p>
            <a href="#reservation" class="btn-main">Réserver maintenant</a>
        </div>
    </section>

    <section class="services">
        <h2>Nos Services</h2>
        <div class="services-grid">
            <div class="service-card">
                <img src="https://via.placeholder.com/300x200" alt="Coupe Homme">
                <h3>Coupe Homme</h3>
                <p>Des coupes modernes et classiques pour sublimer votre style.</p>
                <a href="#" class="view-more">Voir plus →</a>
            </div>
            <div class="service-card">
                <img src="https://via.placeholder.com/300x200" alt="Coupe Femme">
                <h3>Coupe Femme</h3>
                <p>Des tendances actuelles aux coupes intemporelles.</p>
                <a href="#" class="view-more">Voir plus →</a>
            </div>
            <div class="service-card">
                <img src="https://via.placeholder.com/300x200" alt="Coloration">
                <h3>Coloration</h3>
                <p>Des couleurs personnalisées pour révéler votre éclat.</p>
                <a href="#" class="view-more">Voir plus →</a>
            </div>
        </div>
    </section>
    <section class="tarifs">
        <h2>Nos Tarifs</h2>
        <div class="tarifs-grid">
            <div class="tarif-card">
                <h3>Coupe Homme</h3>
                <p class="price">5 000 FCFA</p>
                <p>Coupe classique ou moderne avec shampooing et coiffage.</p>
                <a href="#reservation" class="btn-tarif">Réserver ma coupe</a>
            </div>
            <div class="tarif-card">
                <h3>Coupe Femme</h3>
                <p class="price">8 000 FCFA</p>
                <p>Coupe sur mesure avec shampooing, soin et brushing.</p>
                <a href="#reservation" class="btn-tarif">Réserver ma coupe</a>
            </div>
            <div class="tarif-card">
                <h3>Coloration</h3>
                <p class="price">10 000 FCFA</p>
                <p>Coloration complète avec mèches ou balayage selon vos envies.</p>
                <a href="#reservation" class="btn-tarif">Réserver ma coloration</a>
            </div>
            <div class="tarif-card">
                <h3>Soin Profond</h3>
                <p class="price">12 000 FCFA</p>
                <p>Traitement intensif pour revitaliser et protéger vos cheveux.</p>
                <a href="#reservation" class="btn-tarif">Réserver mon soin</a>
            </div>
        </div>
    </section>
    <!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio Élégance | Barber Shop Premium</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>

    <header>
        <nav>
            <div class="logo">Studio Élégance</div>
            <ul>
                <li><a href="#">Accueil</a></li>
                <li><a href="#galerie">Galerie</a></li>
                <li><a href="#tarifs">Tarifs</a></li>
                <li><a href="#reservation">Contact</a></li>
            </ul>
            <a href="#reservation" class="btn-nav">Réserver</a>
        </nav>
    </header>


    <section id="galerie" class="galerie">
        <h2>Modèles & Inspirations</h2>
        <div class="galerie-grid">
            <div class="galerie-item">
                <img src="https://images.unsplash.com/photo-1503951914875-452162b0f3f1?q=80&w=600" alt="Burst Fade">
                <div class="overlay">Burst Fade Afro</div>
            </div>
            <div class="galerie-item item-tall">
                <img src="https://images.unsplash.com/photo-1618077360395-f3068be8e001?q=80&w=600" alt="Waves">
                <div class="overlay">360 Waves & Low Fade</div>
            </div>
            <div class="galerie-item">
                <img src="https://images.unsplash.com/photo-1599351431202-1e0f0137899a?q=80&w=600" alt="Skin Fade">
                <div class="overlay">Mid Skin Fade</div>
            </div>
        </div>
    </section>

    <section id="tarifs" class="tarifs">
        <h2>Nos Tarifs</h2>
        <div class="tarifs-grid">
            <div class="tarif-card">
                <h3>Taper </h3>
                <p class="price">8 000 FCFA</p>
                <p>Contours précis & dégradé progressif.</p>
            </div>
            <div class="tarif-card">
                <h3>Barbe & Soin</h3>
                <p class="price">5 000 FCFA</p>
                <p>Taille au millimètre & serviette chaude.</p>
            </div>
        </div>
    </section>

    <section class="avis" id="avis">
    <h2>Ce que nos clients disent</h2>
    
    <div class="add-review">
        <h3>Laissez votre avis</h3>
        <form id="reviewForm">
            <div class="stars-input">
                <input type="radio" name="star" id="star5" value="5"><label for="star5">★★★★★</label>
                <input type="radio" name="star" id="star4" value="4"><label for="star4">★★★★</label>
                <input type="radio" name="star" id="star3" value="3"><label for="star3">★★★</label>
                <input type="radio" name="star" id="star2" value="2"><label for="star2">★★</label>
                <input type="radio" name="star" id="star1" value="1"><label for="star1">★</label>
            </div>
            <input type="text" id="userName" placeholder="Votre nom" required>
            <textarea id="userComment" placeholder="Votre expérience au Studio Élégance..." required></textarea>
            <button type="submit" class="btn-main">Publier mon avis</button>
        </form>
    </div>
  <script>
// 1. Charger les avis stockés au démarrage
window.onload = function() {
    const savedAvis = JSON.parse(localStorage.getItem('commentaires')) || [];
    savedAvis.forEach(avis => afficherAvis(avis));
};

document.getElementById('reviewForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const name = document.getElementById('userName').value;
    const comment = document.getElementById('userComment').value;
    const starValue = document.querySelector('input[name="star"]:checked')?.value || "5";

    const nouvelAvis = { name, comment, starValue };

    // 2. Enregistrer dans le LocalStorage
    const savedAvis = JSON.parse(localStorage.getItem('commentaires')) || [];
    savedAvis.push(nouvelAvis);
    localStorage.setItem('commentaires', JSON.stringify(savedAvis));

    // 3. Afficher sur la page
    afficherAvis(nouvelAvis);
    this.reset();
});

function afficherAvis(avis) {
    const container = document.getElementById('avisContainer');
    const div = document.createElement('div');
    div.classList.add('avis-card');
    div.innerHTML = `
        <div class="stars">${"★".repeat(avis.starValue)}${"☆".repeat(5 - avis.starValue)}</div>
        <p class="quote">"${avis.comment}"</p>
        <p class="client-name">${avis.name}</p>
    `;
    container.prepend(div);
}
</script>

    <div class="avis-container" id="avisContainer">
        <div class="avis-card">
            <div class="stars">★★★★★</div>
            <p class="quote">"Le meilleur taper de la ville, on dirait celui de Bellingham. Top !"</p>
            <p class="client-name">Moussa D.</p>
        </div>
    </div>
</section>
    


    <section id="reservation" class="reservation">
        <h2>Réservation</h2>
        <form>
            <input type="text" placeholder="Nom complet" required>
            <input type="tel" placeholder="Téléphone" required>
            <select>
                <option>Choisir un service</option>
                <option>Coupe Homme avec coloration(Noir)</option>
                <option>Coupe Homme sans coloration</option>
            </select>
            <select>
                <option>Choisir le style (Taper, Burst, Waves...)</option>
                <option>Taper</option>
                <option>Dégradé</option>
                <option>Rasé</option>                
                <option>Boule à zéro</option>
            </select>
            <input type="date">
            <button type="submit" class="btn-main">Confirmer</button>
        </form>
    </section>

</body>
</html>