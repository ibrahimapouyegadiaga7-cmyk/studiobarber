<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPG √âl√©gance | Votre Style</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
  // Remplace ces deux valeurs par tes propres cl√©s (trouv√©es dans Settings > API sur Supabase)
  const SUPABASE_URL = 'https://hhylkfuburuxltobtduc.supabase.co';
  const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhoeWxrZnVidXJ1eGx0b2J0ZHVjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxNDk3OTgsImV4cCI6MjA4NTcyNTc5OH0.X1ioG68iC9SehU0tt2_MNNeFI0U2J0fjIgZcnsU3cxg';
  const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

  // 1. Fonction pour charger les avis depuis la base de donn√©es
  async function chargerAvis() {
      const { data, error } = await supabase
          .from('commentaires')
          .select('*')
          .order('created_at', { ascending: false });

      if (data) {
          const container = document.getElementById('avisContainer');
          container.innerHTML = ''; // Vide le conteneur
          data.forEach(avis => {
              afficherAvisSurPage(avis);
          });
      }
  }

  // 2. Fonction pour envoyer un avis vers la base de donn√©es
  document.getElementById('reviewForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const nom = document.getElementById('userName').value;
      const texte = document.getElementById('userComment').value;
      const note = document.querySelector('input[name="star"]:checked')?.value || 5;

      const { error } = await supabase
          .from('commentaires')
          .insert([{ name: nom, comment: texte, stars: note }]);

      if (error) {
          alert("Erreur lors de l'envoi : " + error.message);
      } else {
          this.reset();
          chargerAvis(); // Actualise la liste
      }
  });

  function afficherAvisSurPage(avis) {
      const container = document.getElementById('avisContainer');
      const div = document.createElement('div');
      div.classList.add('avis-card');
      div.innerHTML = `
          <div class="stars">${"‚òÖ".repeat(avis.stars)}${"‚òÜ".repeat(5 - avis.stars)}</div>
          <p class="quote">"${avis.comment}"</p>
          <p class="client-name">${avis.name}</p>
      `;
      container.prepend(div);
  }

  // Charger les avis au lancement
  chargerAvis();
</script>
<body>

    <header>
        <nav>
            <div class="logo">IPG BARBER SHOP</div>
            <ul>
                <li><a href="#">Accueil</a></li>
                <li><a href="#">Services</a></li>
                <li><a href="#">Galerie</a></li>
                <li><a href="#">Tarifs</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
            <a href="#reservation" class="btn-nav">Prendre rendez-vous</a>
        </nav>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1>Votre style, notre signature.</h1>
            <p>L'√©l√©gance rencontre l'art de la coiffure</p>
            <a href="#reservation" class="btn-main">R√©server maintenant</a>
        </div>
    </section>

    <section class="services">
        <h2>Nos Services</h2>
        <div class="services-grid">
            <div class="service-card">
                <img src="https://via.placeholder.com/300x200" alt="Coupe Homme">
                <h3>Coupe Homme</h3>
                <p>Des coupes modernes et classiques pour sublimer votre style.</p>
                <a href="#" class="view-more">Voir plus ‚Üí</a>
            </div>
            <div class="service-card">
                <img src="https://via.placeholder.com/300x200" alt="Coupe Femme">
                <h3>Coupe Femme</h3>
                <p>Des tendances actuelles aux coupes intemporelles.</p>
                <a href="#" class="view-more">Voir plus ‚Üí</a>
            </div>
            <div class="service-card">
                <img src="https://via.placeholder.com/300x200" alt="Coloration">
                <h3>Coloration</h3>
                <p>Des couleurs personnalis√©es pour r√©v√©ler votre √©clat.</p>
                <a href="#" class="view-more">Voir plus ‚Üí</a>
            </div>
        </div>
    </section>
    <section class="tarifs">
        <h2>Nos Tarifs</h2>
        <div class="tarifs-grid">
            <div class="tarif-card">
                <h3>Coupe Homme</h3>
                <p class="price">5 000 FCFA</p>
                <p>Coupe classique ou moderne avec shampooing et coiffage.</p>
                <a href="#reservation" class="btn-tarif">R√©server ma coupe</a>
            </div>
            <div class="tarif-card">
                <h3>Coupe Femme</h3>
                <p class="price">8 000 FCFA</p>
                <p>Coupe sur mesure avec shampooing, soin et brushing.</p>
                <a href="#reservation" class="btn-tarif">R√©server ma coupe</a>
            </div>
            <div class="tarif-card">
                <h3>Coloration</h3>
                <p class="price">10 000 FCFA</p>
                <p>Coloration compl√®te avec m√®ches ou balayage selon vos envies.</p>
                <a href="#reservation" class="btn-tarif">R√©server ma coloration</a>
            </div>
            <div class="tarif-card">
                <h3>Soin Profond</h3>
                <p class="price">12 000 FCFA</p>
                <p>Traitement intensif pour revitaliser et prot√©ger vos cheveux.</p>
                <a href="#reservation" class="btn-tarif">R√©server mon soin</a>
            </div>
        </div>
    </section>
    


    <section id="galerie" class="galerie">
        <h2>Mod√®les & Inspirations</h2>
        <div class="galerie-grid">
            <div class="galerie-item">
                <img src="https://images.unsplash.com/photo-1503951914875-452162b0f3f1?q=80&w=600" alt="Burst Fade">
                <div class="overlay">Burst Fade Afro</div>
            </div>
            <div class="galerie-item item-tall">
                <img src="https://images.unsplash.com/photo-1618077360395-f3068be8e001?q=80&w=600" alt="Waves">
                <div class="overlay">360 Waves & Low Fade</div>
            </div>
            <div class="galerie-item">
                <img src="https://images.unsplash.com/photo-1599351431202-1e0f0137899a?q=80&w=600" alt="Skin Fade">
                <div class="overlay">Mid Skin Fade</div>
            </div>
        </div>
    </section>

    <section id="tarifs" class="tarifs">
        <h2>Nos Tarifs</h2>
        <div class="tarifs-grid">
            <div class="tarif-card">
                <h3>Taper </h3>
                <p class="price">8 000 FCFA</p>
                <p>Contours pr√©cis & d√©grad√© progressif.</p>
            </div>
            <div class="tarif-card">
                <h3>Barbe & Soin</h3>
                <p class="price">5 000 FCFA</p>
                <p>Taille au millim√®tre & serviette chaude.</p>
            </div>
        </div>
    </section>

    <section class="avis" id="avis">
    <h2>Ce que nos clients disent</h2>
    
    <div class="add-review">
        <h3>Laissez votre avis</h3>
        <form id="reviewForm">
            <div class="stars-input">
                <input type="radio" name="star" id="star5" value="5"><label for="star5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</label>
                <input type="radio" name="star" id="star4" value="4"><label for="star4">‚òÖ‚òÖ‚òÖ‚òÖ</label>
                <input type="radio" name="star" id="star3" value="3"><label for="star3">‚òÖ‚òÖ‚òÖ</label>
                <input type="radio" name="star" id="star2" value="2"><label for="star2">‚òÖ‚òÖ</label>
                <input type="radio" name="star" id="star1" value="1"><label for="star1">‚òÖ</label>
            </div>
            <input type="text" id="userName" placeholder="Votre nom" required>
            <textarea id="userComment" placeholder="Votre exp√©rience au Studio √âl√©gance..." required></textarea>
            <button type="submit" class="btn-main">Publier mon avis</button>
        </form>
    </div>
  <script>
// 1. Charger les avis stock√©s au d√©marrage
window.onload = function() {
    const savedAvis = JSON.parse(localStorage.getItem('commentaires')) || [];
    savedAvis.forEach(avis => afficherAvis(avis));
};

document.getElementById('reviewForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const name = document.getElementById('userName').value;
    const comment = document.getElementById('userComment').value;
    const starValue = document.querySelector('input[name="star"]:checked')?.value || "5";

    const nouvelAvis = { name, comment, starValue };

    // 2. Enregistrer dans le LocalStorage
    const savedAvis = JSON.parse(localStorage.getItem('commentaires')) || [];
    savedAvis.push(nouvelAvis);
    localStorage.setItem('commentaires', JSON.stringify(savedAvis));

    // 3. Afficher sur la page
    afficherAvis(nouvelAvis);
    this.reset();
});

function afficherAvis(avis) {
    const container = document.getElementById('avisContainer');
    const div = document.createElement('div');
    div.classList.add('avis-card');
    div.innerHTML = `
        <div class="stars">${"‚òÖ".repeat(avis.starValue)}${"‚òÜ".repeat(5 - avis.starValue)}</div>
        <p class="quote">"${avis.comment}"</p>
        <p class="client-name">${avis.name}</p>
    `;
    container.prepend(div);
}
</script>

    <div class="avis-container" id="avisContainer">
        <div class="avis-card">
            <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
            <p class="quote">"Le meilleur taper de la ville, on dirait celui de Bellingham. Top !"</p>
            <p class="client-name">Moussa D.</p>
        </div>
    </div>
</section>
    
<section id="reservation" class="reservation">
    <h2>R√©server mon style</h2>
    <form id="whatsappForm">
        <input type="text" id="nom_client" placeholder="Nom complet" required>
        <input type="tel" id="tel_client" placeholder="Ton num√©ro de t√©l√©phone" required>
        
        <select id="service_client" required>
            <option>Choisir un service</option>
            <option>Coupe Homme avec coloration(Noir)</option>
            <option>Coupe Homme sans coloration</option>
        </select>
        <select>
            <option>Choisir le style (Taper, D√©grad√©...)</option>
            <option>Taper</option>
            <option>D√©grad√©</option>
            <option>Ras√©</option>                
            <option>Boule √† z√©ro</option>
        </select>
        <input type="date" id="date_client" required>
        <input type="time" id="heure_client" required>

        <button type="button" onclick="envoyerVersWhatsApp()" class="btn-main">
            üì≤ Envoyer sur WhatsApp
        </button>
    </form>
</section>
<script>
function envoyerVersWhatsApp() {
    // 1. Mets ton num√©ro ici (avec l'indicatif pays, sans le + ni les espaces)
    // Exemple pour le S√©n√©gal : 221770000000
    const monNumero = "221769798594"; 

    // 2. On r√©cup√®re les infos du formulaire
    const nom = document.getElementById('nom_client').value;
    const tel = document.getElementById('tel_client').value;
    const service = document.getElementById('service_client').value;
    const date = document.getElementById('date_client').value;
    const heure = document.getElementById('heure_client').value;

    // V√©rification si les champs sont remplis
    if(!nom || !tel || !service || !date || !heure) {
        alert("S'il te pla√Æt, remplis toutes les informations avant d'envoyer !");
        return;
    }

    // 3. On pr√©pare le message bien propre
    const message = `*NOUVELLE R√âSERVATION - STUDIO √âL√âGANCE*%0A%0A` +
                    `üë§ *Client :* ${nom}%0A` +
                    `üìû *Contact :* ${tel}%0A` +
                    `‚úÇÔ∏è *Style :* ${service}%0A` +
                    `üìÖ *Date :* ${date}%0A` +
                    `‚è∞ *Heure :* ${heure}%0A%0A` +
                    `Merci de me confirmer la disponibilit√© !`;

    // 4. On g√©n√®re le lien WhatsApp
    const lienWA = `https://wa.me/${monNumero}?text=${message}`;

    // 5. On ouvre WhatsApp
    window.open(lienWA, '_blank');
}
</script>
</body>
</html>
            